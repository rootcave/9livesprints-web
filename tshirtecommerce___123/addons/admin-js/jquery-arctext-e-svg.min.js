(function($){$.fn.textArc=function(t,d){var lf=0,sf=0;var size=this[0].getBoundingClientRect();var w=size.width;var h=size.height;var x0=0,y0=0;var x=0,y=0;if(d>=360){d=359.999}if(d<=-360){d=-359.999}if(d>=0&&d<=180){lf=0;sf=1}else if(d>180&&d<=360){lf=1;sf=1}else if(d<0&&d>-180){lf=0;sf=0}else if(d<=-180&&d>=-360){lf=1;sf=0}r=w*180.0/(Math.abs(d)*Math.PI);var d1=90-Math.abs(d)/2;var d2=90+Math.abs(d)/2;var r1=(d1)*Math.PI/180;var r2=(d2)*Math.PI/180;var x1=r*Math.cos(r1);var y1=r*Math.sin(r1);var x2=r*Math.cos(r2);var y2=r*Math.sin(r2);if(d>0){x1=(-1)*x1;y1=(-1)*y1;x2=(-1)*x2;y2=(-1)*y2}else{x1=(-1)*x1;y1=y1;x2=(-1)*x2;y2=y2}w=2*r;if(Math.abs(d)>180){h=r+Math.abs(y1)}else{h=r-Math.abs(y1)}if(d>0){x0=x1+r;y0=y1+r;x=x2+r;y=y2+r}else{x0=x1;y0=y1;x=x2;y=y2}var dx=Math.abs(x1);var dy=r;if(Math.abs(d)>180){dx=r}if(d<0&&d>=-180){dy=(-1)*Math.abs(y1)}else if(-180>d&&d>=-360){dy=Math.abs(y1)}x0=x1+dx;y0=y1+dy;x=x2+dx;y=y2+dy;var id=jQuery(this[0]).parent().attr('id');var svg=this[0];var svg_ns="http://www.w3.org/2000/svg";var def_path=document.createElementNS(svg_ns,'path');def_path.setAttributeNS(null,'id','textPath-'+id);def_path.setAttributeNS(null,'d',"M "+x0+" "+y0+" A "+r+" "+r+" 0 "+lf+" "+sf+" "+x+" "+y);var elm_defs=jQuery(svg).find('defs');if(elm_defs.length>0){svg.removeChild(elm_defs[0])}var defs=document.createElementNS(svg_ns,'defs');defs.appendChild(def_path);svg.appendChild(defs);var text_path=document.createElementNS(svg_ns,'textPath');text_path.textContent=t;text_path.setAttributeNS("http://www.w3.org/1999/xlink",'xlink:href','#textPath-'+id);var elm_text=jQuery(svg).find('text');var text=elm_text[0];var tspan=jQuery(svg).find('tspan');if(tspan.length>0){text.removeChild(tspan[0])}var textPath=jQuery(svg).find('textPath');if(textPath.length>0){text.removeChild(textPath[0])}text.appendChild(text_path);var rect=text.getBoundingClientRect();var svg_rect=svg.getBoundingClientRect();dx=svg_rect.left-rect.left;dy=svg_rect.top-rect.top;x0+=dx;y0+=dy;x+=dx;y+=dy;def_path.setAttributeNS(null,'d',"M "+x0+" "+y0+" A "+r+" "+r+" 0 "+lf+" "+sf+" "+x+" "+y);var text=jQuery(svg).find('text');var size=text[0].getBBox();svg.setAttributeNS(null,'width',size.width);svg.setAttributeNS(null,'height',size.height);svg.setAttributeNS(null,'viewBox','0 0 '+size.width+' '+size.height);return size}}(jQuery));